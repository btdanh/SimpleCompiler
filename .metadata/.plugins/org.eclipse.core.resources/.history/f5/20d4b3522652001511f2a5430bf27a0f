
import org.antlr.v4.runtime.*;
import org.antlr.v4.runtime.tree.*;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.Map;

public class Compiler {
	
	public static void RunScanner(String inputPath, String outputPath) throws IOException{
		ANTLRInputStream input = new ANTLRInputStream(new FileInputStream(inputPath));
		
		DecafLexer lexicalAnalyzer = new DecafLexer(input);
		
		CommonTokenStream tokens = new CommonTokenStream(lexicalAnalyzer);
				
		File outputFile = new File(outputPath);
		if(!outputFile.exists()){
			outputFile.createNewFile();
		}		
		FileOutputStream output = new FileOutputStream(outputFile);
		
		if()
	}
	
	public static void RunParser(String inputPath, String outputPath){
		
	}
	
	public static void main(String[] args){
		
		if(args.length % 2 != 0){
			System.out.println("Tham so khong dung");
			return;
		}
		
		String task = "";
		String inputPath = "";
		for(int i = 0; i < args.length; i+= 2){
			if(args[i].equalsIgnoreCase("-target")){
				task = args[i+1];
			}
			else if(args[i].equalsIgnoreCase("-debug")){
				inputPath = args[i+1];
			}
		}
		if(task.isEmpty() || inputPath.isEmpty()){
			System.out.println("Tham so dau vao rong");
			return;
		}
		
		if(task.equalsIgnoreCase("scan")){
			RunScanner(inputPath, "output.decaf");
		}
		if(task.equalsIgnoreCase("parse")){
			RunParser(inputPath, "output.decaf");
		}
		
		
	}
}
